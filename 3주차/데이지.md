4장 설계 품질과 트레이드 오프를 읽고 내가 요약한 것은 아래와 같다.

- 캡슐화는 객체지향에서 가장 중요한 원리. 캡슐화는 변경될 수 있는 모든것을 숨겨야한다.
- 낮은 결합도와 높은 응집도를 지향하자. 이렇게 하면 변경에 대응하기 쉬운 코드가 된다.
- 캡슐화를 지키면 낮은 결합도 높은 응집도가 따라온다.
- 책임 중심의 설계는 내부 구현을 안정적인 인터페이스 뒤로 캡슐화한다. 따라서 책임 중심의 설계는 낮은 결합도와 높은 응집도를 가져온다.

낮은 결합도와 높은 응집도를 가지는 설계가 중요하다고 하고있다. 결합도와 응집도에 대해서 생각으르 하다보니 이런 생각이 들었다.

"응집도를 높이기 위해서 관련된 모든 것들을 하나의 컴포넌트에 훅을 다 몰아넣어야 하는 것 아닌가? 비즈니스 로직이 담긴 훅을 반드시 다 분리해야 할까?"

## 도메인 로직을 포함한 훅

수정을 위해서 하나의 컴포넌트를 수정하면 되니까 좋은거 아닌가? 하는 생각을 했다.

도메인 로직을 수정하면 컴포넌트에도 영향이 간다. 그건 훅으로 분리해도 같은거다. 그렇다면 왜 도메인 로직과 컴포넌트를 분리하라는 걸까?

입력폼과 검증훅은 높은 결합도를 가질 수 밖에 없다. 분리하나 마나 높은 결합도를 가지는 것인데 그러면 응집도를 높이기 위해 같은 컴포넌트파일에 존재하는게 맞는 거 아닌가? 라는 생각이 들었다.

입력 폼 코드

```tsx
function BookingForm({
  handleBookingButtonClick,
  mentoringId,
}: BookingFormProps) {
  const {
    menteeName,
    handleMenteeNameChange,
    errorMessage: menteeNameErrorMessage,
  } = useMenteeNameInput();

  const { phoneNumber, inputRef, handlePhoneNumberChange } =
    useFormattedPhoneNumber();
  const [counselContent, setCounselContent] = useState('');

  const phoneNumberErrorMessage = getPhoneNumberErrorMessage(phoneNumber);

  const handleCounselContentChange = (
    e: React.ChangeEvent<HTMLTextAreaElement>
  ) => {
    setCounselContent(e.target.value);
  };

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();

    handleBooking();
  };

  return (
    <StyledContainer onSubmit={handleSubmit}>
      <StyledInfoText>
        아래 정보를 입력해주시면 멘토에게 상담 신청이 전송됩니다.
      </StyledInfoText>
      <StyledFieldWrapper>
        <FormField
          label="상담자명 *"
          htmlFor="name"
          errorMessage={menteeNameErrorMessage}
        >
          <Input
            placeholder="홍길동"
            id="name"
            value={menteeName}
            onChange={handleMenteeNameChange}
            errored={menteeNameErrorMessage !== ''}
            data-testid="mentee-name-input"
            required
          />
        </FormField>
        <FormField
          label="전화번호 *"
          htmlFor="phone"
          errorMessage={phoneNumberErrorMessage}
        >
          <Input
            placeholder="010-1234-4986"
            id="phone"
            value={phoneNumber}
            onChange={handlePhoneNumberChange}
            errored={phoneNumberErrorMessage !== ''}
            ref={inputRef}
            maxLength={13}
            type="tel"
            data-testid="phone-number-input"
            required
          />
        </FormField>
        <FormField label="상담 내용(선택사항)" htmlFor="details">
          <StyledTextarea
            id="details"
            placeholder="구체적으로 궁금한 내용이나 현재 상황을 적어주시면 
더 정확한 조언을 받을 수 있습니다."
            onChange={handleCounselContentChange}
            errored={false}
            value={counselContent}
          />
        </FormField>
      </StyledFieldWrapper>
      <BookingSummarySection />
    </StyledContainer>
  );
}

export default BookingForm;
```

이 코드는 현재 도메인 로직이 분리된 코드다. 분리되지 않았을때와 비교하여 분리했을때의 장점은 아래와 같다.

도메인 로직이 바뀌면 컴포넌트에도 영향을 받지만 영향을 받는 범위가 줄어든다.

분리는 파급효과를 줄이는 수단이 된다.

---

## 결론

이렇게 중요한 응집도와 결합도를 모두 만족시키기 위해서는 어쩔 수 없이 모두 백프로 만족시킬 수는 없는거 같다. 이 두가지를 만족시키는 적절한 선을 생각하며 짜야할 거 같다?.
